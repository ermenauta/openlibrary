$def with(key, title='', query='', sorts='', limit=18, min_books=7, test=False)

$ results = get_editions_by_ia_query(query=query, sorts=sorts, limit=limit) if not test else {}
$ editions = results.get('editions', [])
$ url = results.get('browse_url')
$ sorts = ','.join(sorts) if sorts else ''
$ load_more_url = '/browse.json?q=%s&sorts=%s' % (query, sorts)
$:macros.BookCarousel(editions, title=title, url=url, key=key, min_books=min_books, load_more={"url": load_more_url, "mode": "page", "limit": limit}, test=test)
